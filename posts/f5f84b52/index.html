<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>關於字符編碼，你所需要知道的（ASCII,Unicode,Utf-8,GB2312…） | JerryC</title><meta name="description" content="字符編碼的問題看似很小，經常被技術人員忽視，但是很容易導致一些莫名其妙的問題。這裏總結了一下字符編碼的一些普及性的知識，希望對大家有所幫助。"><meta name="keywords" content="字符編碼,ISO,UNICODE,ASCII,GB2312,UTF-8,UTF-16,控制碼,字節,字符"><meta name="author" content="JerryC,wong@jerryc.me"><meta name="copyright" content="JerryC"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="shortcut icon" href="/pwa/favicon.ico"><link rel="canonical" href="https://jerryc.me/posts/f5f84b52/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"><meta name="google-site-verification" content="CteF4lqgJrLkOjzNWZfOJnd5n5AhMvoH5hYJ_bWPxq8"><meta name="msvalidate.01" content="FC87DFEDA9899AEA91E028F093A03416"><meta name="baidu-site-verification" content="ApfblsV1NM"><meta name="360-site-verification" content="8c0e5fdcdef668cffe962f1cf3f99a03"><meta name="yandex-verification" content="85af9b89e0417ac7"><meta property="og:type" content="article"><meta property="og:title" content="關於字符編碼，你所需要知道的（ASCII,Unicode,Utf-8,GB2312…）"><meta property="og:url" content="https://jerryc.me/posts/f5f84b52/"><meta property="og:site_name" content="JerryC"><meta property="og:description" content="字符編碼的問題看似很小，經常被技術人員忽視，但是很容易導致一些莫名其妙的問題。這裏總結了一下字符編碼的一些普及性的知識，希望對大家有所幫助。"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/About_Character_Encoding.jpg"><meta property="article:published_time" content="2019-04-14T16:08:30.000Z"><meta property="article:modified_time" content="2020-05-01T11:19:13.000Z"><meta name="twitter:card" content="summary"><link rel="manifest" href="/pwa/site.webmanifest"><link rel="apple-touch-icon" sizes="180x180" href="/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/pwa/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/pwa/favicon-16x16.png"><link rel="mask-icon" href="/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG={root:"/",hexoversion:"5.2.0",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查詢的內容：${query}"}},translate:{defaultEncoding:1,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:{limitDay:400,position:"top",messagePrev:"距離上次更新已經",messageNext:"天，該文章內容/教程可能已經發生變化，請留意。"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0},copy:{success:"複製成功",error:"複製錯誤",noSupport:"瀏覽器不支援"},bookmark:{message_prev:"按",message_next:"鍵將本頁加入書籤"},runtime:"天",date_suffix:{one_hour:"剛剛",hours:"小時前",day:"天前"},copyright:{limitCount:150,languages:{author:"作者: JerryC",link:"連結: ",source:"來源: JerryC",info:"著作權歸作者所有。商業轉載請聯絡作者獲得授權，非商業轉載請註明出處。"}},ClickShowText:void 0,medium_zoom:!0,fancybox:!1,Snackbar:void 0,justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},baiduPush:!1,isPhotoFigcaption:!1,islazyload:!0,isanchor:!0},saveToLocal={set:function(e,i,t){const s=864e5*t,a={value:i,expiry:(new Date).getTime()+s};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const i=localStorage.getItem(e);if(!i)return;const t=JSON.parse(i);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}</script><script id="config_change">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isSidebar:!0,postUpdate:"2020-05-01 19:19:13"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}</style></noscript><script>var activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")},autoChangeMode="1",t=saveToLocal.get("theme");if("1"===autoChangeMode){var isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches,isLightMode=window.matchMedia("(prefers-color-scheme: light)").matches,isNotSpecified=window.matchMedia("(prefers-color-scheme: no-preference)").matches,hasNoSupport=!isDarkMode&&!isLightMode&&!isNotSpecified;if(void 0===t){if(isLightMode)activateLightMode();else if(isDarkMode)activateDarkMode();else if(isNotSpecified||hasNoSupport){var now=new Date,hour=now.getHours(),isNight=hour<=6||hour>=18;isNight?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener((function(e){void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())}))}else"light"===t?activateLightMode():activateDarkMode()}else"2"===autoChangeMode?(isNight=(hour=(now=new Date).getHours())<=6||hour>=18,void 0===t?isNight?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode()):"dark"===t?activateDarkMode():"light"===t&&activateLightMode()</script><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}#post{font-size:1.05em}</style><link rel="alternate" href="/atom.xml" title="JerryC" type="application/atom+xml"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="/image/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">25</div></a></div></div><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/tags/"><div class="headline">標籤</div><div class="length_num">31</div></a></div></div><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/categories/"><div class="headline">分類</div><div class="length_num">10</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分類</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heartbeat"></i> <span>娛樂</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>電影</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fas fa-camera-retro"></i> <span>照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-coffee"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-user-friends"></i> <span>友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>關於</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目錄</div><div class="sidebar-toc__progress"><span class="progress-notice">你已經讀了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%97%9C%E6%96%BC%E5%AD%97%E7%AC%A6%E7%B7%A8%E7%A2%BC%EF%BC%8C%E4%BD%A0%E6%89%80%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84%EF%BC%88ASCII-Unicode-Utf-8-GB2312%E2%80%A6%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">關於字符編碼，你所需要知道的（ASCII,Unicode,Utf-8,GB2312…）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%84%E6%98%AF%E5%BE%97%E5%BE%9EASCII%E7%A2%BC%E8%AA%AC%E8%B5%B7"><span class="toc-number">1.1.</span> <span class="toc-text">還是得從ASCII碼説起</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OEM%E5%AD%97%E7%AC%A6%E9%9B%86%E7%9A%84%E8%A1%8D%E7%94%9F"><span class="toc-number">1.2.</span> <span class="toc-text">OEM字符集的衍生</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%AD%97%E7%AF%80%E5%AD%97%E7%AC%A6%E9%9B%86%EF%BC%88MBCS%EF%BC%89%E5%92%8C%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="toc-number">1.3.</span> <span class="toc-text">多字節字符集（MBCS）和中文字符集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ANSI%E6%A8%99%E6%BA%96%E3%80%81%E5%9C%8B%E5%AE%B6%E6%A8%99%E6%BA%96%E3%80%81ISO%E6%A8%99%E6%BA%96"><span class="toc-number">1.4.</span> <span class="toc-text">ANSI標準、國家標準、ISO標準</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Unicode%E7%9A%84%E5%87%BA%E7%8F%BE"><span class="toc-number">1.5.</span> <span class="toc-text">Unicode的出現</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unicode%E5%AD%97%E7%AC%A6%E9%9B%86%E6%A6%82%E8%BF%B0"><span class="toc-number">1.5.1.</span> <span class="toc-text">Unicode字符集概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B7%A8%E7%A2%BC%E7%B3%BB%E7%B5%B1%E7%9A%84%E8%AE%8A%E5%8C%96"><span class="toc-number">1.5.2.</span> <span class="toc-text">編碼系統的變化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A6%8B%E7%9A%84Unicode%E7%B7%A8%E7%A2%BC"><span class="toc-number">1.5.3.</span> <span class="toc-text">常見的Unicode編碼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#UCS-2-UTF-16"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">UCS-2&#x2F;UTF-16</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UTF-8"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">UTF-8</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GB18030"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">GB18030</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unicode%E7%9B%B8%E9%97%9C%E7%9A%84%E5%B8%B8%E8%A6%8B%E5%95%8F%E9%A1%8C"><span class="toc-number">1.5.4.</span> <span class="toc-text">Unicode相關的常見問題</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%82%E7%A2%BC%E5%95%8F%E9%A1%8C"><span class="toc-number">1.5.5.</span> <span class="toc-text">亂碼問題</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%85%E8%A6%81%E7%9A%84%E8%A1%93%E8%AA%9E%E8%A7%A3%E9%87%8B"><span class="toc-number">1.5.6.</span> <span class="toc-text">必要的術語解釋</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Unicode-%E5%92%8C-UTF-8-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">Unicode 和 UTF-8 有什么区别？</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/About_Character_Encoding.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">JerryC</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜尋</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分類</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heartbeat"></i> <span>娛樂</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>電影</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fas fa-camera-retro"></i> <span>照片</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-coffee"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-user-friends"></i> <span>友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>關於</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">關於字符編碼，你所需要知道的（ASCII,Unicode,Utf-8,GB2312…）</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2019-04-14T16:08:30.000Z" title="發表於 2019-04-15 00:08:30">2019-04-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2020-05-01T11:19:13.000Z" title="更新於 2020-05-01 19:19:13">2020-05-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字數總計:</span><span class="word-count">8.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">閲讀時長:</span><span>27分鐘</span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="關於字符編碼，你所需要知道的（ASCII-Unicode-Utf-8-GB2312…）"><a href="#關於字符編碼，你所需要知道的（ASCII-Unicode-Utf-8-GB2312…）" class="headerlink" title="關於字符編碼，你所需要知道的（ASCII,Unicode,Utf-8,GB2312…）"></a>關於字符編碼，你所需要知道的（ASCII,Unicode,Utf-8,GB2312…）</h1><blockquote><p>轉自 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.imkevinyang.com/2010/06/%E5%85%B3%E4%BA%8E%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%EF%BC%8C%E4%BD%A0%E6%89%80%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84.html">Kevin Yang</a></p></blockquote><p>字符編碼的問題看似很小，經常被技術人員忽視，但是很容易導致一些莫名其妙的問題。這裏總結了一下字符編碼的一些普及性的知識，希望對大家有所幫助。</p><h2 id="還是得從ASCII碼説起"><a href="#還是得從ASCII碼説起" class="headerlink" title="還是得從ASCII碼説起"></a>還是得從ASCII碼説起</h2><p>説到字符編碼，不得不説ASCII碼的簡史。計算機一開始發明的時候是用來解決數字計算的問題，後來人們發現，計算機還可以做更多的事，例如文本處理。但由於計算機只識“數”，因此人們必須告訴計算機哪個數字來代表哪個特定字符，例如65代表字母‘A’，66代表字母‘B’，以此類推。但是<strong>計算機之間字符-數字的對應關係必須得一致，否則就會造成同一段數字在不同計算機上顯示出來的字符不一樣。</strong>因此美國國家標準協會ANSI制定了一個標準，規定了常用字符的集合以及每個字符對應的編號，這就是ASCII字符集（Character Set），也稱ASCII碼。</p><p>當時的計算機普遍使用8比特字節作為最小的存儲和處理單元，加之當時用到的字符也很少，26個大小寫英文字母還有數字再加上其他常用符號，也不到100個，因此使用7個比特位就可以高效的存儲和處理ASCII碼，剩下最高位1比特被用作一些通訊系統的奇偶校驗。</p><blockquote><p>注意，字節代表系統能夠處理的最小單位，不一定是8比特。只是現代計算機的事實標準就是用8比特來代表一個字節。在很多技術規格文獻中，為了避免產生歧義，更傾向於使用8位組（Octet）而不是字節（Byte）這個術語來強調8個比特的二進制流。下文中為了便於理解，我會延用大家熟悉的“字節”這個概念。</p></blockquote><p><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/ASCII_table.png" alt="ASCII table"></p><p>ASCII字符集由95個可打印字符（0x20-0x7E）和33個控制字符（0x00-0x19，0x7F）組成。可打印字符用於顯示在輸出設備上，例如熒屏或者打印紙上，控制字符用於向計算機發出一些特殊指令，例如0x07會讓計算機發出嗶的一聲，0x00通常用於指示字符串的結束，0x0D和0x0A用於指示打印機的打印針頭退到行首（回車）並移到下一行（換行）。</p><p>那時候的字符編解碼系統非常簡單，就是簡單的查表過程。例如將字符序列編碼為二進制流寫入存儲設備，只需要在ASCII字符集中依次找到字符對應的字節，然後直接將該字節寫入存儲設備即可。解碼二進制流的過程也是類似。</p><h2 id="OEM字符集的衍生"><a href="#OEM字符集的衍生" class="headerlink" title="OEM字符集的衍生"></a>OEM字符集的衍生</h2><p>當計算機開始發展起來的時候，人們逐漸發現，ASCII字符集裏那可憐的128個字符已經不能再滿足他們的需求了。人們就在想，一個字節能夠表示的數字（編號）有256個，而ASCII字符只用到了0x00~0x7F，也就是佔用了前128個，後面128個數字不用白不用，因此很多人打起了後面這128個數字的主意。可是問題在於，很多人同時有這樣的想法，但是大家對於0x80-0xFF這後面的128個數字分別對應什麼樣的字符，卻有各自的想法。這就導致了當時銷往世界各地的機器上出現了大量各式各樣的OEM字符集。</p><p>下面這張表是IBM-PC機推出的其中一個OEM字符集，字符集的前128個字符和ASCII字符集的基本一致（為什麼説基本一致呢，是因為前32個控制字符在某些情況下會被IBM-PC機當作可打印字符解釋），後面128個字符空間加入了一些歐洲國家用到的重音字符，以及一些用於畫線條畫的字符。</p><p><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/IBM_PC_OEM_character_set.png" alt="IBM-PC OEM字符集"></p><p>事實上，大部分OEM字符集是兼容ASCII字符集的，也就是説，大家對於0x00<del>0x7F這個範圍的解釋基本是相同的，而對於後半部分0x80</del>0xFF的解釋卻不一定相同。甚至有時候同樣的字符在不同OEM字符集中對應的字節也是不同的。</p><p>不同的OEM字符集導致人們無法跨機器交流各種文檔。例如職員甲發了一封簡歷résumés給職員乙，結果職員乙看到的卻是r?sum?s，因為é字符在職員甲機器上的OEM字符集中對應的字節是0x82，而在職員乙的機器上，由於使用的OEM字符集不同，對0x82字節解碼後得到的字符卻是?。</p><h2 id="多字節字符集（MBCS）和中文字符集"><a href="#多字節字符集（MBCS）和中文字符集" class="headerlink" title="多字節字符集（MBCS）和中文字符集"></a>多字節字符集（MBCS）和中文字符集</h2><p>上面我們提到的字符集都是基於單字節編碼，也就是説，一個字節翻譯成一個字符。這對於拉丁語系國家來説可能沒有什麼問題，因為他們通過擴展第8個比特，就可以得到256個字符了，足夠用了。但是對於亞洲國家來説，256個字符是遠遠不夠用的。因此這些國家的人為了用上電腦，又要保持和ASCII字符集的兼容，就發明了多字節編碼方式，相應的字符集就稱為多字節字符集。例如中國使用的就是雙字節字符集編碼（DBCS，Double Byte Character Set）。</p><p>對於單字節字符集來説，代碼頁中只需要有一張碼錶即可，上面記錄着256個數字代表的字符。程序只需要做簡單的查表操作就可以完成編解碼的過程。</p><blockquote><p>代碼頁是字符集編碼的具體實現，你可以把他理解為一張“字符-字節”映射表，通過查表實現“字符-字節”的翻譯。下面會有更詳細的描述。</p></blockquote><p>而對於多字節字符集，代碼頁中通常會有很多碼錶。那麼程序怎麼知道該使用哪張碼錶去解碼二進制流呢？答案是，<strong>根據第一個字節來選擇不同的碼錶進行解析。</strong></p><p>例如目前最常用的中文字符集GB2312，涵蓋了所有簡體字符以及一部分其他字符；GBK（K代表擴展的意思）則在GB2312的基礎上加入了對繁體字符等其他非簡體字符（GB18030字符集不是雙字節字符集，我們在講Unicode的時候會提到）。這兩個字符集的字符都是使用1-2個字節來表示。Windows系統採用936代碼頁來實現對GBK字符集的編解碼。在解析字節流的時候，如果遇到字節的最高位是0的話，那麼就使用936代碼頁中的第1張碼錶進行解碼，這就和單字節字符集的編解碼方式一致了。</p><p><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/Codepage_936.png" alt="936代碼頁"></p><p>當字節的高位是1的時候，確切的説，當第一個字節位於0x81–0xFE之間時，根據第一個字節不同找到代碼頁中的相應的碼錶，例如當第一個字節是0x81，那麼對應936中的下面這張碼錶：</p><p><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/Codepage_936_2.png" alt="936代碼頁2"></p><p>（關於936代碼頁中完整的碼錶信息，參見MSDN：<a target="_blank" rel="noopener external nofollow noreferrer" href="http://msdn.microsoft.com/en-us/library/cc194913%28v=MSDN.10%29.aspx.%EF%BC%89">http://msdn.microsoft.com/en-us/library/cc194913%28v=MSDN.10%29.aspx.）</a></p><p>按照936代碼頁的碼錶，當程序遇到連續字節流0x81 0x40的時候，就會解碼為“丂”字符。</p><h2 id="ANSI標準、國家標準、ISO標準"><a href="#ANSI標準、國家標準、ISO標準" class="headerlink" title="ANSI標準、國家標準、ISO標準"></a>ANSI標準、國家標準、ISO標準</h2><p>不同ASCII衍生字符集的出現，讓文檔交流變得非常困難，因此各種組織都陸續進行了標準化流程。例如美國ANSI組織制定了ANSI標準字符編碼（注意，<strong>我們現在通常説到ANSI編碼，通常指的是平台的默認編碼，例如英文操作系統中是ISO-8859-1，中文系統是GBK</strong>），ISO組織制定的各種ISO標準字符編碼，還有各國也會制定一些國家標準字符集，例如中國的GBK，GB2312和GB18030。</p><p>操作系統在發佈的時候，通常會往機器裏預裝這些標準的字符集還有平台專用的字符集，這樣只要你的文檔是使用標準字符集編寫的，通用性就比較高了。例如你用GB2312字符集編寫的文檔，在中國大陸內的任何機器上都能正確顯示。同時，我們也可以在一台機器上閲讀多個國家不同語言的文檔了，前提是本機必須安裝該文檔使用的字符集。</p><h2 id="Unicode的出現"><a href="#Unicode的出現" class="headerlink" title="Unicode的出現"></a>Unicode的出現</h2><p>雖然通過使用不同字符集，我們可以在一台機器上查閲不同語言的文檔，但是我們仍然無法解決一個問題：<strong>在一份文檔中顯示所有字符</strong>。為了解決這個問題，我們需要一個全人類達成共識的巨大的字符集，這就是Unicode字符集。</p><h3 id="Unicode字符集概述"><a href="#Unicode字符集概述" class="headerlink" title="Unicode字符集概述"></a>Unicode字符集概述</h3><p>Unicode字符集涵蓋了目前人類使用的所有字符，併為每個字符進行統一編號，分配唯一的字符碼（Code Point）。Unicode字符集將所有字符按照使用上的頻繁度劃分為17個層面（Plane），每個層面上有2<sup>16</sup>=65536個字符碼空間。</p><p><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/Unicode.png" alt="Unicode"></p><p>其中第0個層面BMP，基本涵蓋了當今世界用到的所有字符。其他的層面要麼是用來表示一些遠古時期的文字，要麼是留作擴展。我們平常用到的Unicode字符，一般都是位於BMP層面上的。目前Unicode字符集中尚有大量字符空間未使用。</p><h3 id="編碼系統的變化"><a href="#編碼系統的變化" class="headerlink" title="編碼系統的變化"></a>編碼系統的變化</h3><p>在Unicode出現之前，所有的字符集都是和具體編碼方案綁定在一起的，都是直接將字符和最終字節流綁定死了，例如ASCII編碼系統規定使用7比特來編碼ASCII字符集；GB2312以及GBK字符集，限定了使用最多2個字節來編碼所有字符，並且規定了字節序。這樣的編碼系統通常用簡單的查表，也就是通過代碼頁就可以直接將字符映射為存儲設備上的字節流了。例如下面這個例子：</p><p><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/Coding_system.png" alt="編碼系統"></p><p>這種方式的缺點在於，字符和字節流之間耦合得太緊密了，從而限定了字符集的擴展能力。假設以後火星人入住地球了，要往現有字符集中加入火星文就變得很難甚至不可能了，而且很容易破壞現有的編碼規則。</p><p>因此Unicode在設計上考慮到了這一點，將字符集和字符編碼方案分離開。</p><p><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/Character_encoding_system.png" alt="字符編碼系統"></p><p>也就是説，<strong>雖然每個字符在Unicode字符集中都能找到唯一確定的編號（字符碼，又稱Unicode碼），但是決定最終字節流的卻是具體的字符編碼</strong>。例如同樣是對Unicode字符“A”進行編碼，UTF-8字符編碼得到的字節流是0x41，而UTF-16（大端模式）得到的是0x00 0x41。</p><h3 id="常見的Unicode編碼"><a href="#常見的Unicode編碼" class="headerlink" title="常見的Unicode編碼"></a>常見的Unicode編碼</h3><h4 id="UCS-2-UTF-16"><a href="#UCS-2-UTF-16" class="headerlink" title="UCS-2/UTF-16"></a>UCS-2/UTF-16</h4><p>如果要我們來實現Unicode字符集中BMP字符的編碼方案，我們會怎麼實現？由於BMP層面上有2<sup>16</sup>=65536個字符碼，因此我們只需要兩個字節就可以完全表示這所有的字符了。</p><p>舉個例子，“中”的Unicode字符碼是0x4E2D(01001110 00101101)，那麼我們可以編碼為01001110 00101101（大端）或者00101101 01001110 （小端）。</p><p>UCS-2和UTF-16對於BMP層面的字符均是使用2個字節來表示，並且編碼得到的結果完全一致。不同之處在於，<strong>UCS-2最初設計的時候只考慮到BMP字符，因此使用固定2個字節長度，也就是説，他無法表示Unicode其他層面上的字符，而UTF-16為了解除這個限制，支持Unicode全字符集的編解碼，採用了變長編碼，最少使用2個字節，如果要編碼BMP以外的字符，則需要4個字節結對</strong>，這裏就不討論那麼遠，有興趣可以參考維基百科：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://en.wikipedia.org/wiki/UTF-16">UTF-16/UCS-2</a>。</p><p>Windows從NT時代開始就採用了UTF-16編碼，很多流行的編程平台，例如.Net，Java，Qt還有Mac下的Cocoa等都是使用UTF-16作為基礎的字符編碼。例如代碼中的字符串，在內存中相應的字節流就是用UTF-16編碼過的。</p><h4 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h4><p>UTF-8應該是目前應用最廣泛的一種Unicode編碼方案。由於UCS-2/UTF-16對於ASCII字符使用兩個字節進行編碼，存儲和處理效率相對低下，並且由於ASCII字符經過UTF-16編碼後得到的兩個字節，高字節始終是0x00，很多C語言的函數都將此字節視為字符串末尾從而導致無法正確解析文本。因此一開始推出的時候遭到很多西方國家的抵觸，大大影響了Unicode的推行。後來聰明的人們發明了UTF-8編碼，解決了這個問題。</p><p>UTF-8編碼方案採用1-4個字節來編碼字符，方法其實也非常簡單。</p><p><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/UTF-8_encoding.png" alt="UTF-8編碼"></p><p>（上圖中的x代表Unicode碼的低8位，y代表高8位）</p><p><strong>對於ASCII字符的編碼使用單字節，和ASCII編碼一摸一樣，這樣所有原先使用ASCII編解碼的文檔就可以直接轉到UTF-8編碼了。對於其他字符，則使用2-4個字節來表示，其中，首字節前置1的數目代表正確解析所需要的字節數，剩餘字節的高2位始終是10。例如首字節是1110yyyy，前置有3個1，説明正確解析總共需要3個字節，需要和後面2個以10開頭的字節結合才能正確解析得到字符。</strong></p><p>關於UTF-8的更多信息，參考維基百科：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a>。</p><h4 id="GB18030"><a href="#GB18030" class="headerlink" title="GB18030"></a>GB18030</h4><p>任何能夠將Unicode字符映射為字節流的編碼都屬於Unicode編碼。中國的GB18030編碼，覆蓋了Unicode所有的字符，因此也算是一種Unicode編碼。只不過他的編碼方式並不像UTF-8或者UTF-16一樣，將Unicode字符的編號通過一定的規則進行轉換，而只能通過查表的手段進行編碼。</p><p>關於GB18030的更多信息，參考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://en.wikipedia.org/wiki/GB_18030">GB18030</a>。</p><h3 id="Unicode相關的常見問題"><a href="#Unicode相關的常見問題" class="headerlink" title="Unicode相關的常見問題"></a>Unicode相關的常見問題</h3><ul><li><p>Unicode是兩個字節嗎？<br>Unicode只是定義了一個龐大的、全球通用的字符集，併為每個字符規定了唯一確定的編號，具體存儲為什麼樣的字節流，取決於字符編碼方案。推薦的Unicode編碼是UTF-16和UTF-8。</p></li><li><p>帶簽名的UTF-8指的是什麼意思？</p><p>帶簽名指的是字節流以BOM標記開始。很多軟件會“智能”的探測當前字節流使用的字符編碼，這種探測過程出於效率考慮，通常會提取字節流前面若干個字節，看看是否符合某些常見字符編碼的編碼規則。由於UTF-8和ASCII編碼對於純英文的編碼是一樣的，無法區分開來，因此通過在字節流最前面添加BOM標記可以告訴軟件，當前使用的是Unicode編碼，判別成功率就十分準確了。但是需要注意，不是所有軟件或者程序都能正確處理BOM標記，例如PHP就不會檢測BOM標記，直接把它當普通字節流解析了。因此如果你的PHP文件是採用帶BOM標記的UTF-8進行編碼的，那麼有可能會出現問題。</p></li><li><p>Unicode編碼和以前的字符集編碼有什麼區別？</p><p>早期字符編碼、字符集和代碼頁等概念都是表達同一個意思。例如GB2312字符集、GB2312編碼，936代碼頁，實際上説的是同個東西。但是對於Unicode則不同，Unicode字符集只是定義了字符的集合和唯一編號，Unicode編碼，則是對UTF-8、UCS-2/UTF-16等具體編碼方案的統稱而已，並不是具體的編碼方案。所以當需要用到字符編碼的時候，你可以寫gb2312，codepage936，utf-8，utf-16，但請不要寫unicode（看過別人在網頁的meta標籤裏頭寫charset=unicode，有感而發）。</p></li></ul><h3 id="亂碼問題"><a href="#亂碼問題" class="headerlink" title="亂碼問題"></a>亂碼問題</h3><p>亂碼指的是程序顯示出來的字符文本無法用任何語言去解讀。一般情況下會包含大量?。亂碼問題是所有計算機用户或多或少會遇到的問題。<strong>造成亂碼的原因就是因為使用了錯誤的字符編碼去解碼字節流，因此當我們在思考任何跟文本顯示有關的問題時，請時刻保持清醒：當前使用的字符編碼是什麼</strong>。只有這樣，我們才能正確分析和處理亂碼問題。</p><p>例如最常見的網頁亂碼問題。如果你是網站技術人員，遇到這樣的問題，需要檢查以下原因：</p><ul><li>服務器返回的響應頭Content-Type沒有指明字符編碼</li><li>網頁內是否使用META HTTP-EQUIV標籤指定了字符編碼</li><li>網頁文件本身存儲時使用的字符編碼和網頁聲明的字符編碼是否一致<br><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/Check_webpage_garbled.png" alt="檢查網頁亂碼"></li></ul><p>注意，網頁解析的過程如果使用的字符編碼不正確，還可能會導致腳本或者樣式表出錯。具體細節可以參考我以前寫過的文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.imkevinyang.com/2009/08/%E6%96%87%E6%A1%A3%E5%AD%97%E7%AC%A6%E9%9B%86%E5%AF%BC%E8%87%B4%E7%9A%84%E8%84%9A%E6%9C%AC%E9%94%99%E8%AF%AF.html">文檔字符集導致的腳本錯誤</a>和<a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.imkevinyang.com/2009/11/asp-net%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98.html">Asp.Net頁面的編碼問題</a>。</p><p>不久前看到某技術論壇有人反饋，WinForm程序使用Clipboard類的GetData方法去訪問剪切板中的HTML內容時會出現亂碼的問題，我估計也是由於WinForm在獲取HTML文本的時候沒有用對正確的字符編碼導致的。Windows剪貼板只支持UTF-8編碼，也就是説你傳入的文本都會被UTF-8編解碼。這樣一來，只要兩個程序都是調用Windows剪切板API編程的話，那麼複製粘貼的過程中不會出現亂碼。除非一方在獲取到剪貼板數據之後使用了錯誤的字符編碼進行解碼，才會得到亂碼（我做了簡單的WinForm剪切板編程實驗，發現GetData使用的是系統默認編碼，而不是UTF-8編碼）。</p><p>關於亂碼中出現?或者?，這裏需要額外提一下，<strong>當程序使用特定字符編碼解析字節流的時候，一旦遇到無法解析的字節流時，就會用解碼失敗替換字符或者?來替代。因此，一旦你最終解析得到的文本包含這樣的字符，而你又無法得到原始字節流的時候，説明正確的信息已經徹底丟失了，嘗試任何字符編碼都無法從這樣的字符文本中還原出正確的信息來</strong>。</p><h3 id="必要的術語解釋"><a href="#必要的術語解釋" class="headerlink" title="必要的術語解釋"></a>必要的術語解釋</h3><p><strong>字符集（Character Set）</strong>，字面上的理解就是字符的集合，例如ASCII字符集，定義了128個字符；GB2312定義了7445個字符。而<strong>計算機系統中提到的字符集準確來説，指的是已編號的字符的有序集合（不一定是連續）</strong>。</p><p><strong>字符碼（Code Point）</strong>指的就是字符集中每個字符的數字編號。例如ASCII字符集用0-127這連續的128個數字分別表示128個字符；GBK字符集使用區位碼的方式為每個字符編號，首先定義一個94X94的矩陣，行稱為“區”，列稱為“位”，然後將所有國標漢字放入矩陣當中，這樣每個漢字就可以用唯一的“區位”碼來標識了。例如“中”字被放到54區第48位，因此字符碼就是5448。而Unicode中將字符集按照一定的類別劃分到0~16這17個層面（Planes）中，每個層面中擁有2<sup>16</sup>=65536個字符碼，因此Unicode總共擁有的字符碼，也即是Unicode的字符空間總共有17*65536=1114112。</p><p><img src="/image/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/blog/About_Character_Encoding/Unicode_Basic_code_structure.png" alt="Unicode Basic code structure"></p><p><strong>編碼</strong>的過程是將字符轉換成字節流。</p><p><strong>解碼</strong>的過程是將字節流解析為字符。</p><p><strong>字符編碼（Character Encoding）</strong>是將字符集中的字符碼映射為字節流的一種具體實現方案。例如ASCII字符編碼規定使用單字節中低位的7個比特去編碼所有的字符。例如‘A’的編號是65，用單字節表示就是0x41，因此寫入存儲設備的時候就是b’01000001’。GBK編碼則是將區位碼（GBK的字符碼）中的區碼和位碼的分別加上0xA0（160）的偏移（之所以要加上這樣的偏移，主要是為了和ASCII碼兼容），例如剛剛提到的“中”字，區位碼是5448，十六進制是0x3630，區碼和位碼分別加上0xA0的偏移之後就得到0xD6D0，這就是“中”字的GBK編碼結果。</p><p><strong>代碼頁（Code Page）</strong>一種字符編碼具體形式。早期字符相對少，因此通常會使用類似表格的形式將字符直接映射為字節流，然後通過查表的方式來實現字符的編解碼。現代操作系統沿用了這種方式。例如Windows使用936代碼頁、Mac系統使用EUC-CN代碼頁實現GBK字符集的編碼，名字雖然不一樣，但對於同一漢字的編碼肯定是一樣的。</p><p><strong>大小端</strong>的説法源自《格列佛遊記》。我們知道，雞蛋通常一端大一端小，小人國的人們對於剝蛋殼時應從哪一端開始剝起有着不一樣的看法。同樣，計算機界對於傳輸多字節字（由多個字節來共同表示一個數據類型）時，是先傳高位字節（大端）還是先傳低位字節（小端）也有着不一樣的看法，這就是計算機裏頭大小端模式的由來了。無論是寫文件還是網絡傳輸，實際上都是往流設備進行寫操作的過程，而且這個寫操作是從流的低地址向高地址開始寫（這很符合人的習慣），對於多字節字來説，如果先寫入高位字節，則稱作大端模式。反之則稱作小端模式。也就是説，大端模式下，字節序和流設備的地址順序是相反的，而小端模式則是相同的。一般網絡協議都採用大端模式進行傳輸，windows操作系統採用Utf-16小端模式。</p><p>參考鏈接：</p><ol><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="http://developers.sun.com/dev/gadc/technicalpublications/articles/gb18030.html">http://developers.sun.com/dev/gadc/technicalpublications/articles/gb18030.html</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="http://en.wikipedia.org/wiki/Universal_Character_Set">http://en.wikipedia.org/wiki/Universal_Character_Set</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="http://en.wikipedia.org/wiki/Code_page">http://en.wikipedia.org/wiki/Code_page</a></li></ol><h1 id="Unicode-和-UTF-8-有什么区别？"><a href="#Unicode-和-UTF-8-有什么区别？" class="headerlink" title="Unicode 和 UTF-8 有什么区别？"></a>Unicode 和 UTF-8 有什么区别？</h1><blockquote><p>轉發自知乎 盛世唐朝 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.zhihu.com/question/23374078">https://www.zhihu.com/question/23374078</a></p></blockquote><p>很久很久以前，有一群人，他們決定用8個可以開合的晶體管來組合成不同的狀態，以表示世界上的萬物。他們看到8個開關狀態是好的，於是他們把這稱為”<strong>字節</strong>“。再後來，他們又做了一些可以處理這些字節的機器，機器開動了，可以用字節來組合出很多狀態，狀態開始變來變去。他們看到這樣是好的，於是它們就這機器稱為”<strong>計算機</strong>“。</p><p>開始計算機只在美國用。八位的字節一共可以組合出256(2的8次方)種不同的狀態。<br>他們把其中的編號從0開始的32種狀態分別規定了特殊的用途，一但終端、打印機遇上約定好的這些字節被傳過來時，就要做一些約定的動作：<br>遇上0×10, 終端就換行；<br>遇上0×07, 終端就向人們嘟嘟叫；<br>遇上0x1b, 打印機就打印反白的字，或者終端就用彩色顯示字母。<br>他們看到這樣很好，於是就把這些0×20以下的字節狀態稱為”控制碼”。他們又把所有的空<br>格、標點符號、數字、大小寫字母分別用連續的字節狀態表示，一直編到了第127號，這樣計算機就可以用不同字節來存儲英語的文字了。大家看到這樣，都感覺很好，於是大家都把這個方案叫做 <strong>ANSI</strong> 的”Ascii”編碼（American Standard Code for Information Interchange，美國信息互換標準代碼）。當時世界上所有的計算機都用同樣的<strong>ASCII</strong>方案來保存英文文字。</p><p>後來，就像建造巴比倫塔一樣，世界各地都開始使用計算機，但是很多國家用的不是英文，他們的字母裏有許多是ASCII裏沒有的，為了可以在計算機保存他們的文字，他們決定採用 127號之後的空位來表示這些新的字母、符號，還加入了很多畫表格時需要用下到的橫線、豎線、交叉等形狀，一直把序號編到了最後一個狀態255。從128 到255這一頁的字符集被稱”<strong>擴展字符集</strong>“。從此之後，貪婪的人類再沒有新的狀態可以用了，美帝國主義可能沒有想到還有第三世界國家的人們也希望可以用到計算機吧！</p><p>等中國人們得到計算機時，已經沒有可以利用的字節狀態來表示漢字，況且有6000多個常用漢字需要保存呢。但是這難不倒智慧的中國人民，我們不客氣地把那些127號之後的奇異符號們直接取消掉, 規定：一個小於127的字符的意義與原來相同，但兩個大於127的字符連在一起時，就表示一個漢字，前面的一個字節（他稱之為高字節）從0xA1用到0xF7，後面一個字節（低字節）從0xA1到0xFE，這樣我們就可以組合出大約7000多個簡體漢字了。在這些編碼裏，我們還把數學符號、羅馬希臘的字母、日文的假名們都編進去了，連在 ASCII 裏本來就有的數字、標點、字母都統統重新編了兩個字節長的編碼，這就是常説的”全角”字符，而原來在127號以下的那些就叫”半角”字符了。中國人民看到這樣很不錯，於是就把這種漢字方案叫做 “<strong>GB2312</strong>“。GB2312 是對 ASCII 的中文擴展。</p><p>但是中國的漢字太多了，我們很快就就發現有許多人的人名沒有辦法在這裏打出來，特別是某些很會麻煩別人的國家領導人。於是我們不得不繼續把GB2312 沒有用到的碼位找出來老實不客氣地用上。後來還是不夠用，於是乾脆不再要求低字節一定是127號之後的內碼，只要第一個字節是大於127就固定表示這是一個漢字的開始，不管後面跟的是不是擴展字符集裏的內容。結果擴展之後的編碼方案被稱為<strong>GBK</strong> 標準，GBK包括了GB2312 的所有內容，同時又增加了近20000個新的漢字（包括繁體字）和符號。 後來少數民族也要用電腦了，於是我們再擴展，又加了幾千個新的少數民族的字，GBK擴成了 <strong>GB18030</strong>。從此之後，中華民族的文化就可以在計算機時代中傳承了。 中國的程序員們看到這一系列漢字編碼的標準是好的，於是通稱他們叫做 “<strong>DBCS</strong>“（Double Byte Charecter Set 雙字節字符集）。在DBCS系列標準裏，最大的特點是兩字節長的漢字字符和一字節長的英文字符並存於同一套編碼方案裏，因此他們寫的程序為了支持中文處理，必須要注意字串裏的每一個字節的值，如果這個值是大於127的，那麼就認為一個雙字節字符集裏的字符出現了。那時候凡是受過加持，會編程的計算機僧侶們都要每天念下面這個咒語數百遍： “一個漢字算兩個英文字符！一個漢字算兩個英文字符……”</p><p>因為當時各個國家都像中國這樣搞出一套自己的編碼標準，結果互相之間誰也不懂誰的編碼，誰也不支持別人的編碼，連大陸和台灣這樣只相隔了150海里，使用着同一種語言的兄弟地區，也分別採用了不同的 DBCS 編碼方案——當時的中國人想讓電腦顯示漢字，就必須裝上一個”漢字系統”，專門用來處理漢字的顯示、輸入的問題，像是那個台灣的愚昧封建人士寫的算命程序就必須加裝另一套支持 BIG5 編碼的什麼”倚天漢字系統”才可以用，裝錯了字符系統，顯示就會亂了套！這怎麼辦？而且世界民族之林中還有那些一時用不上電腦的窮苦人民，他們的文字又怎麼辦？ 真是計算機的巴比倫塔命題啊！</p><p>正在這時，大天使加百列及時出現了——一個叫 ISO（國際標誰化組織）的國際組織決定着手解決這個問題。他們採用的方法很簡單：廢了所有的地區性編碼方案，重新搞一個包括了地球上所有文化、所有字母和符號 的編碼！他們打算叫它”Universal Multiple-Octet Coded Character Set”，簡稱 <strong>UCS</strong>, 俗稱 “<strong>unicode</strong>“。</p><p>unicode開始制訂時，計算機的存儲器容量極大地發展了，空間再也不成為問題了。於是 ISO 就直接規定必須用兩個字節，也就是16位來統一表示所有的字符，對於ASCII裏的那些”半角”字符，unicode包持其原編碼不變，只是將其長度由原來的8位擴展為16位，而其他文化和語言的字符則全部重新統一編碼。由於”半角”英文符號只需要用到低8位，所以其高8位永遠是0，因此這種大氣的方案在保存英文文本時會多浪費一倍的空間。</p><p>這時候，從舊社會裏走過來的程序員開始發現一個奇怪的現象：他們的 strlen 函數靠不住了，一個漢字不再是相當於兩個字符了，而是一個！是的，從unicode開始，無論是半角的英文字母，還是全角的漢字，它們都是統一的”<strong>一個字符</strong>“！同時，也都是統一的”<strong>兩個字節</strong>“，請注意”<strong>字符</strong>“和”<strong>字節</strong>“兩個術語的不同，”<strong>字節</strong>“是一個8位的物理存貯單元，而”<strong>字符</strong>“則是一個文化相關的符號。在unicode中，一個字符就是兩個字節。一個漢字算兩個英文字符的時代已經快過去了。</p><p>unicode同樣也不完美，這裏就有兩個的問題，一個是，如何才能區別unicode和ascii？計算機怎麼知道三個字節表示一個符號，而不是分別表示三個符號呢？第二個問題是，我們已經知道，英文字母只用一個字節表示就夠了，如果unicode統一規定，每個符號用三個或四個字節表示，那麼每個英文字母前都必然有二到三個字節是0，這對於存儲空間來説是極大的浪費，文本文件的大小會因此大出二三倍，這是難以接受的。</p><p>unicode在很長一段時間內無法推廣，直到互聯網的出現，為解決unicode如何在網絡上傳輸的問題，於是面向傳輸的眾多 <strong>UTF</strong>（UCS Transfer Format）標準出現了，顧名思義，<strong>UTF-8</strong>就是每次8個位傳輸數據，而<strong>UTF-16</strong>就是每次16個位。UTF-8就是在互聯網上使用最廣的一種unicode的實現方式，這是為傳輸而設計的編碼，並使編碼無國界，這樣就可以顯示全世界上所有文化的字符了。UTF-8最大的一個特點，就是它是一種變長的編碼方式。它可以使用1~4個字節表示一個符號，根據不同的符號而變化字節長度，當字符在ASCII碼的範圍時，就用一個字節表示，保留了ASCII字符一個字節的編碼做為它的一部分，注意的是unicode一箇中文字符佔2個字節，而UTF-8一箇中文字符佔3個字節）。從unicode到utf-8並不是直接的對應，而是要過一些算法和規則來轉換。</p><table><thead><tr><th>Unicode符號範圍(十六進制)</th><th>UTF-8編碼方式（二進制）</th></tr></thead><tbody><tr><td>0000 0000-0000 007F</td><td>0xxxxxxx</td></tr><tr><td>0000 0080-0000 07FF</td><td>110xxxxx 10xxxxxx</td></tr><tr><td>0000 0800-0000 FFFF</td><td>1110xxxx 10xxxxxx 10xxxxxx</td></tr><tr><td>0001 0000-0010 FFFF</td><td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td></tr></tbody></table><p>最後簡單總結一下：</p><ul><li>中國人民通過對 ASCII 編碼的中文擴充改造，產生了 GB2312 編碼，可以表示6000多個常用漢字。</li><li>漢字實在是太多了，包括繁體和各種字符，於是產生了 GBK 編碼，它包括了 GB2312 中的編碼，同時擴充了很多。</li><li>中國是個多民族國家，各個民族幾乎都有自己獨立的語言系統，為了表示那些字符，繼續把 GBK 編碼擴充為 GB18030 編碼。</li><li>每個國家都像中國一樣，把自己的語言編碼，於是出現了各種各樣的編碼，如果你不安裝相應的編碼，就無法解釋相應編碼想表達的內容。</li><li>終於，有個叫 ISO 的組織看不下去了。他們一起創造了一種編碼 UNICODE ，這種編碼非常大，大到可以容納世界上任何一個文字和標誌。所以只要電腦上有 UNICODE 這種編碼系統，無論是全球哪種文字，只需要保存文件的時候，保存成 UNICODE 編碼就可以被其他電腦正常解釋。</li><li>UNICODE 在網絡傳輸中，出現了兩個標準 UTF-8 和 UTF-16，分別每次傳輸 8個位和 16個位。於是就會有人產生疑問，UTF-8 既然能保存那麼多文字、符號，為什麼國內還有這麼多使用 GBK 等編碼的人？因為 UTF-8 等編碼體積比較大，佔電腦空間比較多，如果面向的使用人群絕大部分都是中國人，用 GBK 等編碼也可以。</li></ul></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Android/">Android</a><a class="post-meta__tags" href="/tags/Java/">Java</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/About_Character_Encoding.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打賞<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/image/wechat.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/image/wechat.jpg" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/image/alipay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/image/alipay.jpg" alt="支付寶"></a><div class="post-qr-code-desc">支付寶</div></li><li class="reward-item"><a href="https://paypal.me/iamjerrywong?locale.x=zh_HK" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" data-lazy-src="/image/paypal.png" alt="Paypal（點擊圖片跳轉）"></a><div class="post-qr-code-desc">Paypal（點擊圖片跳轉）</div></li></ul></div></div></div><div class="post-ad"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8919908724705274" data-ad-slot="5978969231"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/59b77e20/"><img class="prev-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/must-have-windows-software-recommend.jpg" onerror='onerror=null,src="/img/404.jpg"'><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Windows必裝軟件推薦</div></div></a></div><div class="next-post pull-right"><a href="/posts/d786a301/"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/Weibo-Picture-Store-cover.jpg" onerror='onerror=null,src="/img/404.jpg"'><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">好用的新浪圖床工具推薦 - Weibo-Picture-Store</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i> <span>相關推薦</span></div><div class="relatedPosts-list"><div><a href="/posts/46be9372/" title="Java知識點複習(二)"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/Java_review_2.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-04-10</div><div class="title">Java知識點複習(二)</div></div></a></div><div><a href="/posts/58a40d07/" title="Java知識點複習(一)"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/Java_review_1.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-03-29</div><div class="title">Java知識點複習(一)</div></div></a></div><div><a href="/posts/777fb9e9/" title="9Patch 介紹"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/9Patch_Introduction.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-07-19</div><div class="title">9Patch 介紹</div></div></a></div><div><a href="/posts/d6615de0/" title="Adapter"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/android-cover.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-07-20</div><div class="title">Adapter</div></div></a></div><div><a href="/posts/44aa2b74/" title="第一行代碼筆記-創建自定義控件"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/Create_a_custom_components.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-07-05</div><div class="title">第一行代碼筆記-創建自定義控件</div></div></a></div><div><a href="/posts/effd323a/" title="第一行代碼筆記-Android Studio工程目錄結構介紹"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/Android_Studio_Projects_Overview.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-08</div><div class="title">第一行代碼筆記-Android Studio工程目錄結構介紹</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>評論</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></article></main><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/About_Character_Encoding.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2020 By JerryC</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主題</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="閱讀模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="簡繁轉換">簡</button><button id="darkmode" type="button" title="淺色和深色模式轉換"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="設定"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直達評論"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到頂部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜尋</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜尋文章" type="text"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/wzpan/hexo-generator-search" style="color:#49b1f5">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadDisqusjs(){function s(){window.DISQUS=null,new DisqusJS({shortname:"https-jerryc-me",siteName:"JerryC",identifier:"posts/f5f84b52/",url:"https://jerryc.me/posts/f5f84b52/",title:"關於字符編碼，你所需要知道的（ASCII,Unicode,Utf-8,GB2312…）",api:"https://disqus.skk.moe/disqus/",apikey:"nrSx8ZhuHvjwDeKauPZ3lMnyLb7iR92BT4wl4AlKG4eJl27jxXlzOeLQ9SJP1RDW",nocomment:"這裏冷冷清清的，一條評論都沒有，快來留下印記。",admin:"iamjerryc",adminLabel:"博主"})}window.disqusReset=s,window.disqusJsLoad?s():(!function(){const s=document.createElement("link");s.rel="stylesheet",s.href="https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css",document.getElementsByTagName("head")[0].appendChild(s)}(),$.getScript("https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js",s),window.disqusJsLoad=!0)}{function loadOtherComment(){loadDisqusjs()}btf.loadComment(document.getElementById("disqus_thread"),loadDisqusjs)}</script></div><script>window.addEventListener("load",()=>{const e=e=>{let t="";for(let s=0;s<e.length;s++)t+="<div class='aside-list-item'>",t+=`<a href='${e[s].url}' class="thumbnail"><img src='${e[s].avatar}'></a>`,t+=`<div class='content'>\n      <a class='comment' href='${e[s].url}'>${e[s].content}</a>\n      <div class='name'><span>${e[s].nick}</span><time> / ${btf.diffDate(e[s].date,!0)}</time></div>\n      </div></div>`;let s=document.querySelector(".card-newest-comments .aside-list");s.innerHTML=t,window.pjax&&window.pjax.refresh(s)},t=()=>{if(document.querySelector(".card-newest-comments .aside-list")){const t=saveToLocal.get("disqus-newest-comments");t?e(JSON.parse(t)):(()=>{let t=[];$.getJSON("https://disqus.com/api/3.0/forums/listPosts.json?forum=https-jerryc-me&related=thread&limit=6&api_key=nrSx8ZhuHvjwDeKauPZ3lMnyLb7iR92BT4wl4AlKG4eJl27jxXlzOeLQ9SJP1RDW",(function(s){$.each(s.response,(e,s)=>{var a;t.push({avatar:s.author.avatar.cache,content:(a=s.message,""===a||(a=(a=(a=a.replace(/<[^>]+>/g,"")).replace(/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|webp)/g,"")).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"")).length>150&&(a=a.substring(0,150)+"..."),a),nick:s.author.name,url:s.url,date:s.createdAt})}),saveToLocal.set("disqus-newest-comments",JSON.stringify(t),10/1440),e(t)}))})()}};t(),document.addEventListener("pjax:complete",t)})</script><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>✨ 網站已更新最新版本 👉</label> <a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()">點擊刷新</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"已更新最新版本",backgroundColor:t,duration:5e5,pos:e,actionText:"點擊刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","meta[name=description]","#config_change","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:complete",(function(){window.refreshFn(),$("script[data-pjax]").each((function(){$(this).parent().append($(this).remove())})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:send",(function(){if(window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy(),$(window).off("scroll"),$("body").hasClass("read-mode")&&$("body").removeClass("read-mode")}))</script></div></body></html>